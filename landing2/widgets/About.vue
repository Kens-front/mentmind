<template>
    <section class="we" ref="section">
        <div class="title_wrap" ref="titleWrap">
            <h3 class="title">–ö—Ç–æ –º—ã?</h3>
            <h3 class="title">–ö—Ç–æ –º—ã?</h3>
            <h3 class="title">–ö—Ç–æ –º—ã?</h3>
        </div>

        <div class="text" ref="text">
            <p class="spans">
                <span>6000+ —á–∞—Å–æ–≤ –∂–∏–≤—ã—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π</span>

                <span>–†–∞–±–æ—Ç–∞–µ–º —Å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º –Ω–∞–¥ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏</span>
              
                <span>–ö–∞–∂–¥–∞—è –≤—Å—Ç—Ä–µ—á–∞ - —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –º–µ–Ω—Ç–æ—Ä–æ–º</span>

                <span>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥—Ä–µ–π–¥–∞</span>
            </p>
        </div>
        <div class="mix"></div>
    </section>
</template>

<script setup lang="ts">
import { gsap } from 'gsap'
import { ScrollTrigger } from 'gsap/ScrollTrigger'
import { nextTick, onMounted, ref } from 'vue';
 
// –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–ª–∞–≥–∏–Ω
gsap.registerPlugin(ScrollTrigger)

const section = ref<HTMLDivElement | null>(null)
const h1 = ref(null);
const titleWrap = ref(null)
const text = ref(null)
onMounted(async () => {
    await nextTick();
    const sections = document.querySelectorAll('.we .title')
 
    const tl = gsap.timeline({
        easy: 'power1.in',
        scrollTrigger: {
            trigger: '.we',
            start: `top ${section.value?.offsetHeight}`, 
            end: `bottom top`,
            scrub: 1,
            id: 'about'
        }
    })

    tl.from(sections[0]!, {
        x: '100%',
    }, '+=.5').
    from(sections[1]!, {
        x: '-100%',
    }, '<').
    from(sections[2]!, {
        x: '100%',
    }, '<')
    .to(sections[0]!, {
        y: '0',
    }, '+=.5').
    to(sections[1]!, {
        y: '0',
    }, '<').
    to(sections[2]!, {
        y: '0',
    }, '<')
    .to(titleWrap.value, {
        scale: 0.1,
    })
    .from(text.value, {
        opacity:0,
        y: 500,
    })
    .to(titleWrap.value, {
        y: -700,
    }, '<')
    .to(text.value, {
        backgroundPosition: '0 0',
    }, '<')
 



    ScrollTrigger.create({
        trigger: section.value,
        start: 'top top',        // üîπ –ü—Ä–∏–ª–∏–ø–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤–µ—Ä—Ö = –≤–µ—Ä—Ö —ç–∫—Ä–∞–Ω–∞
        end: `bottom top`, // üîπ –û—Ç–ª–∏–ø–∞–µ—Ç —á–µ—Ä–µ–∑ 500px —Å–∫—Ä–æ–ª–ª–∞
        pin: true,               // üîπ –§–∏–∫—Å–∏—Ä—É–µ—Ç —ç–ª–µ–º–µ–Ω—Ç
        pinSpacing: true,        // –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Å—Ç–æ –≤ –ø–æ—Ç–æ–∫–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
        invalidateOnRefresh: true
    })
})
</script>

<style lang="scss" scoped>
.we {
    padding: 2rem;
    top: 0;
    left: 0;
    right: 0;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
}

.title {
    position: absolute;
    width: 100%;
    font-size: 28rem;
    text-transform: uppercase;
    text-align: center;
    line-height: 100%;
    font-weight: 700;
    color: #CBD5E1;

    &:first-child {
        transform: translateY(-100%);
 
    }
    &:last-child {
        transform: translateY(100%);
 
    }

    &_wrap {
        position: absolute;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        width: 100%;
    }

    @media screen and (max-width: 1024px) {
        font-size: 20rem;
    }

    @media screen and (max-width: 767px) {
        font-size: 16rem;
    }

    @media screen and (max-width: 500px) {
        font-size: 20vw;
    }
}

.text {
    font-size: 6rem;
    font-weight: 800;
    display: flex;
    align-items: center;
    flex-direction: column;
    width: 80%;
    text-align: center;
    background: linear-gradient(
    to bottom,
    #40E0C0,     /* –Ω–æ–≤—ã–π —Ü–≤–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—Ä–∞—Å–Ω—ã–π) */
    #754DFF 50%, /* –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ä–µ–∑–∫—É—é –≥—Ä–∞–Ω–∏—Ü—É */
    #888888 50%, /* —Å—Ç–∞—Ä—ã–π —Ü–≤–µ—Ç (—Å–µ—Ä—ã–π) */
    #888888
  );
    background-size: 100% 200%; /* —É–¥–≤–æ–µ–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –¥–ª—è —Å–¥–≤–∏–≥–∞ */
    background-position: 0 100%; /* –Ω–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ: –≥—Ä–∞–¥–∏–µ–Ω—Ç "—Å–ø—Ä—è—Ç–∞–Ω" –≤–Ω–∏–∑—É */
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: background-position 0.3s ease; /* GSAP –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç */

    @media screen and (max-width: 767px) {
        width: 100%;
    }
}

.spans {
    display: grid;
    row-gap: 1rem;
}

.mix {
    position: absolute;
    height: 50%;
    top: 0;
}
</style>